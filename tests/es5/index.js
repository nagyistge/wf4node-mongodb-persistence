"use strict";
var es6 = true;
try {
  eval("(function *(){})");
} catch (err) {
  es6 = false;
}
var es = es6 ? "es6" : "es5";
var wf4node = require("workflow-4-node");
var MongoDDPersistence = require("../../").MongoDDPersistence;
var hostingTestCommon = require("../../node_modules/workflow-4-node/tests/" + es + "/hosting/hostingTestCommon");
var Serializer = require("backpack-node").system.Serializer;
var connStr = process.env.MONGO_URL;
var persistence = connStr ? new MongoDDPersistence({connection: connStr}) : null;
if (persistence) {
  describe("WorkflowHost", function() {
    this.timeout(5000);
    this.beforeEach(function(done) {
      persistence.__clear().nodeify(done);
    });
    function getInfo(options) {
      return ("lazy: " + (options.lazyPersistence ? "yes" : "no") + ", serializer: " + (options.serializer ? "yes" : "no") + ", alwaysLoad: " + (options.alwaysLoadState ? "yes" : "no"));
    }
    function testBasic(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doBasicHostTest(options).nodeify(done);
      });
    }
    function testCalc(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doCalculatorTest(options).nodeify(done);
      });
    }
    function testDelayTo(options) {
      it("should run by: " + getInfo(options), function(done) {
        hostingTestCommon.doDelayTest(options).nodeify(done);
      });
    }
    var allOptions = [{
      persistence: persistence,
      lazyPersistence: false,
      serializer: null,
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: null,
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: false,
      serializer: new Serializer(),
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: new Serializer(),
      alwaysLoadState: false
    }, {
      persistence: persistence,
      lazyPersistence: false,
      serializer: new Serializer(),
      alwaysLoadState: true
    }, {
      persistence: persistence,
      lazyPersistence: true,
      serializer: new Serializer(),
      alwaysLoadState: true
    }];
    describe("With MongoDB Persistence", function() {
      describe("Basic Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testBasic(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
      describe("Calculator Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testCalc(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
      describe("DelayTo Example", function() {
        var $__4 = true;
        var $__5 = false;
        var $__6 = undefined;
        try {
          for (var $__2 = void 0,
              $__1 = (allOptions)[$traceurRuntime.toProperty(Symbol.iterator)](); !($__4 = ($__2 = $__1.next()).done); $__4 = true) {
            var opt = $__2.value;
            {
              testDelayTo(opt);
            }
          }
        } catch ($__7) {
          $__5 = true;
          $__6 = $__7;
        } finally {
          try {
            if (!$__4 && $__1.return != null) {
              $__1.return();
            }
          } finally {
            if ($__5) {
              throw $__6;
            }
          }
        }
      });
    });
  });
}
//# sourceMappingURL=data:application/json;base64,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dUIsR0FBSyxLQUFHLENBQUc7QUFDMUQsd0JBQXdCLEFBQUMsRUFBQyxDQUFDO1lBQzdCO0FBQUEsVUFDRixDQUFFLE9BQVE7QUFDUixvQkFBd0I7QUFDdEIsd0JBQXdCO1lBQzFCO0FBQUEsVUFDRjtBQUFBLFFBQ0Y7QUFBQSxNQXVGSSxDQUFDLENBQUM7SUFDTixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFDTjtBQUFBIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6InRlc3RzL2VzNiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuLyogZ2xvYmFsIGRlc2NyaWJlLGl0ICovXHJcblxyXG52YXIgZXM2ID0gdHJ1ZTtcclxudHJ5IHtcclxuICAgIGV2YWwoXCIoZnVuY3Rpb24gKigpe30pXCIpO1xyXG59IGNhdGNoIChlcnIpIHtcclxuICAgIGVzNiA9IGZhbHNlO1xyXG59XHJcblxyXG52YXIgZXMgPSBlczYgPyBcImVzNlwiIDogXCJlczVcIjtcclxuXHJcbmxldCB3ZjRub2RlID0gcmVxdWlyZShcIndvcmtmbG93LTQtbm9kZVwiKTtcclxubGV0IE1vbmdvRERQZXJzaXN0ZW5jZSA9IHJlcXVpcmUoXCIuLi8uLi9cIikuTW9uZ29ERFBlcnNpc3RlbmNlO1xyXG5sZXQgaG9zdGluZ1Rlc3RDb21tb24gPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL3dvcmtmbG93LTQtbm9kZS90ZXN0cy9cIiArIGVzICsgXCIvaG9zdGluZy9ob3N0aW5nVGVzdENvbW1vblwiKTtcclxubGV0IFNlcmlhbGl6ZXIgPSByZXF1aXJlKFwiYmFja3BhY2stbm9kZVwiKS5zeXN0ZW0uU2VyaWFsaXplcjtcclxuXHJcbmxldCBjb25uU3RyID0gcHJvY2Vzcy5lbnYuTU9OR09fVVJMO1xyXG5sZXQgcGVyc2lzdGVuY2UgPSBjb25uU3RyID8gbmV3IE1vbmdvRERQZXJzaXN0ZW5jZSh7Y29ubmVjdGlvbjogY29ublN0cn0pIDogbnVsbDtcclxuXHJcbmlmIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgZGVzY3JpYmUoXCJXb3JrZmxvd0hvc3RcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudGltZW91dCg1MDAwKTtcclxuICAgICAgICB0aGlzLmJlZm9yZUVhY2goZnVuY3Rpb24oZG9uZSkge1xyXG4gICAgICAgICAgICBwZXJzaXN0ZW5jZS5fX2NsZWFyKCkubm9kZWlmeShkb25lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5mbyhvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgbGF6eTogJHtvcHRpb25zLmxhenlQZXJzaXN0ZW5jZSA/IFwieWVzXCIgOiBcIm5vXCJ9LCBzZXJpYWxpemVyOiAke29wdGlvbnMuc2VyaWFsaXplciA/IFwieWVzXCIgOiBcIm5vXCJ9LCBhbHdheXNMb2FkOiAke29wdGlvbnMuYWx3YXlzTG9hZFN0YXRlID8gXCJ5ZXNcIiA6IFwibm9cIn1gO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdGVzdEJhc2ljKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcnVuIGJ5OiBcIiArIGdldEluZm8ob3B0aW9ucyksIGZ1bmN0aW9uIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0aW5nVGVzdENvbW1vbi5kb0Jhc2ljSG9zdFRlc3Qob3B0aW9ucykubm9kZWlmeShkb25lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB0ZXN0Q2FsYyhvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGl0KFwic2hvdWxkIHJ1biBieTogXCIgKyBnZXRJbmZvKG9wdGlvbnMpLCBmdW5jdGlvbiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgICAgaG9zdGluZ1Rlc3RDb21tb24uZG9DYWxjdWxhdG9yVGVzdChvcHRpb25zKS5ub2RlaWZ5KGRvbmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRlc3REZWxheVRvKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaXQoXCJzaG91bGQgcnVuIGJ5OiBcIiArIGdldEluZm8ob3B0aW9ucyksIGZ1bmN0aW9uIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgICBob3N0aW5nVGVzdENvbW1vbi5kb0RlbGF5VGVzdChvcHRpb25zKS5ub2RlaWZ5KGRvbmUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBhbGxPcHRpb25zID0gW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBwZXJzaXN0ZW5jZTogcGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgICAgICBsYXp5UGVyc2lzdGVuY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGFsd2F5c0xvYWRTdGF0ZTogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICAgICAgbGF6eVBlcnNpc3RlbmNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGFsd2F5c0xvYWRTdGF0ZTogZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2U6IHBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICAgICAgbGF6eVBlcnNpc3RlbmNlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IG5ldyBTZXJpYWxpemVyKCksXHJcbiAgICAgICAgICAgICAgICBhbHdheXNMb2FkU3RhdGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBwZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IG5ldyBTZXJpYWxpemVyKCksXHJcbiAgICAgICAgICAgICAgICBhbHdheXNMb2FkU3RhdGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBwZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzZXJpYWxpemVyOiBuZXcgU2VyaWFsaXplcigpLFxyXG4gICAgICAgICAgICAgICAgYWx3YXlzTG9hZFN0YXRlOiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBwZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgICAgIGxhenlQZXJzaXN0ZW5jZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZXI6IG5ldyBTZXJpYWxpemVyKCksXHJcbiAgICAgICAgICAgICAgICBhbHdheXNMb2FkU3RhdGU6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGRlc2NyaWJlKFwiV2l0aCBNb25nb0RCIFBlcnNpc3RlbmNlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGVzY3JpYmUoXCJCYXNpYyBFeGFtcGxlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG9wdCBvZiBhbGxPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVzdEJhc2ljKG9wdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZGVzY3JpYmUoXCJDYWxjdWxhdG9yIEV4YW1wbGVcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb3B0IG9mIGFsbE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXN0Q2FsYyhvcHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRlc2NyaWJlKFwiRGVsYXlUbyBFeGFtcGxlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG9wdCBvZiBhbGxPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVzdERlbGF5VG8ob3B0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSJdfQ==
